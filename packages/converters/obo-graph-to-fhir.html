<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OBO Graph to FHIR Converter &mdash; oaklib  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=046fa432"></script>
        <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="OBO Graph to OBO Format Converter" href="obo-graph-to-obo-format.html" />
    <link rel="prev" title="Abstract Class" href="data-model-converter.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            oaklib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/index.html">The OAK Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">OAK Library Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/index.html">Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../implementations/index.html">Implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../selectors.html">Ontology Adapter Selectors</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Converters</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#command-line-usage">Command Line Usage</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#converting-from-obo-graphs">Converting from Obo Graphs</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="data-model-converter.html">Abstract Class</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">OBO Graph to FHIR Converter</a></li>
<li class="toctree-l4"><a class="reference internal" href="obo-graph-to-obo-format.html">OBO Graph to OBO Format Converter</a></li>
<li class="toctree-l4"><a class="reference internal" href="obo-graph-to-owl.html">OBO Graph to OWL Converter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../utilities.html">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datamodels/index.html">Datamodels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../howtos/index.html">How-To Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks.html">Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">oaklib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">OAK Library Documentation</a></li>
          <li class="breadcrumb-item"><a href="index.html">Converters</a></li>
      <li class="breadcrumb-item active">OBO Graph to FHIR Converter</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/packages/converters/obo-graph-to-fhir.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="obo-graph-to-fhir-converter">
<span id="id1"></span><h1>OBO Graph to FHIR Converter<a class="headerlink" href="#obo-graph-to-fhir-converter" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="oaklib.converters.obo_graph_to_fhir_converter.OboGraphToFHIRConverter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">oaklib.converters.obo_graph_to_fhir_converter.</span></span><span class="sig-name descname"><span class="pre">OboGraphToFHIRConverter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">curie_converter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Converter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labeler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enforce_canonical_ordering</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/oaklib/converters/obo_graph_to_fhir_converter.html#OboGraphToFHIRConverter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#oaklib.converters.obo_graph_to_fhir_converter.OboGraphToFHIRConverter" title="Link to this definition"></a></dt>
<dd><p>Converts from OboGraph to FHIR.</p>
<ul>
<li><p>An ontology is mapped to a FHIR <a class="reference external" href="https://build.fhir.org/codesystem.html">CodeSystem</a>.</p></li>
<li><p>Each node in the OboGraph is converted to a _FHIR <a href="#id2"><span class="problematic" id="id3">Concept_</span></a>.</p></li>
<li><p>Each CURIE/URI in the OboGraph is treated as a CURIE when it becomes a packages (e.g. “HP:0000001”)</p></li>
<li><p>Each edge in the OboGraph is converted to a _FHIR <a href="#id4"><span class="problematic" id="id5">ConceptProperty_</span></a> if the <cite>include_all_predicates</cite> param is
True. Otherwise, will only convert edges if the predicate is in the <cite>DIRECT_PREDICATE_MAP</cite>.</p></li>
<li><p>Each synonym in the OboGraph is converted to a _FHIR <a href="#id6"><span class="problematic" id="id7">ConceptDesignation_</span></a>.</p>
<blockquote>
<div><ul class="simple">
<li><p>The synonym predicate is mapped to a _FHIR <a href="#id8"><span class="problematic" id="id9">Coding_</span></a>, using the <cite>SCOPE_MAP</cite>.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>To run on the command line:</p>
<blockquote>
<div><p>runoak  –prefix my_prefix=my_expansion -i obograph:my-ont.json dump -O fhirjson -o my-ont.fhir.json</p>
</div></blockquote>
<p>Here the input is an OboGraph JSON file. You can also specify:</p>
<blockquote>
<div><ul class="simple">
<li><p>OWL as sqlite</p></li>
<li><p>OBO Format</p></li>
</ul>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="oaklib.converters.obo_graph_to_fhir_converter.OboGraphToFHIRConverter.dump">
<span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">GraphDocument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/oaklib/converters/obo_graph_to_fhir_converter.html#OboGraphToFHIRConverter.dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#oaklib.converters.obo_graph_to_fhir_converter.OboGraphToFHIRConverter.dump" title="Link to this definition"></a></dt>
<dd><p>Dump an OBO Graph Document to a FHIR CodeSystem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> – Source serialization.</p></li>
<li><p><strong>target</strong> – Target serialization.</p></li>
<li><p><strong>kwargs</strong> – Additional keyword arguments passed to <span class="xref std std-ref">convert</span>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="oaklib.converters.obo_graph_to_fhir_converter.OboGraphToFHIRConverter.convert">
<span class="sig-name descname"><span class="pre">convert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">GraphDocument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CodeSystem</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code_system_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code_system_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_all_predicates</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">native_uri_stems</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_curies_native_concepts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_curies_foreign_concepts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predicate_period_replacement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CodeSystem</span></span></span><a class="reference internal" href="../../_modules/oaklib/converters/obo_graph_to_fhir_converter.html#OboGraphToFHIRConverter.convert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#oaklib.converters.obo_graph_to_fhir_converter.OboGraphToFHIRConverter.convert" title="Link to this definition"></a></dt>
<dd><p>Convert an OBO Graph Document to a FHIR CodingSystem</p>
<p>To use:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">oaklib.converters.obo_graph_to_fhir_converter</span> <span class="kn">import</span> <span class="n">OboGraphToFHIRConverter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">oaklib.datamodels.obograph</span> <span class="kn">import</span> <span class="n">GraphDocument</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">linkml_runtime.dumpers</span> <span class="kn">import</span> <span class="n">json_dumper</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">linkml_runtime.loaders</span> <span class="kn">import</span> <span class="n">json_loader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span> <span class="o">=</span> <span class="n">OboGraphToFHIRConverter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">graph</span> <span class="o">=</span> <span class="n">json_loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;tests/input/hp_test.json&quot;</span><span class="p">,</span> <span class="n">target_class</span><span class="o">=</span><span class="n">GraphDocument</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">code_system</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">json_dumper</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">code_system</span><span class="p">))</span>

<span class="go">...</span>
<span class="go"> &quot;concept&quot;: [</span>
<span class="go">    {</span>
<span class="go">    &quot;code&quot;: &quot;HP:0012639&quot;,</span>
<span class="go">    &quot;display&quot;: &quot;Abnormal nervous system morphology&quot;,</span>
<span class="go">    &quot;definition&quot;: &quot;A structural anomaly of the nervous system.&quot;,</span>
<span class="go">    &quot;designation&quot;: [</span>
<span class="go"> ...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code_system_id</strong> – The packages system ID to use for identification on the server uploaded to.
See: <a class="reference external" href="https://hl7.org/fhir/resource-definitions.html#Resource.id">https://hl7.org/fhir/resource-definitions.html#Resource.id</a></p></li>
<li><p><strong>code_system_url</strong> – Canonical URL for the packages system.
See: <a class="reference external" href="https://hl7.org/fhir/codesystem-definitions.html#CodeSystem.url">https://hl7.org/fhir/codesystem-definitions.html#CodeSystem.url</a></p></li>
<li><p><strong>native_uri_stems</strong> – A list of URI stems that will be used to determine whether a
concept is native to the CodeSystem. (not implemented)
For example, for OMIM, the following URI stems are native:
<a class="reference external" href="https://omim.org/entry/">https://omim.org/entry/</a>, <a class="reference external" href="https://omim.org/phenotypicSeries/PS">https://omim.org/phenotypicSeries/PS</a></p></li>
<li><p><strong>include_all_predicates</strong> – Include the maximal amount of predicates.
Changes the default behavior from only
exporting: IS_A (rdfs:subClassOf)</p></li>
<li><p><strong>use_curies_native_concepts</strong> – FHIR conventionally uses codes for references to
concepts that are native to a given CodeSystem. With this option,
references will be CURIEs instead. (not implemented)</p></li>
<li><p><strong>use_curies_foreign_concepts</strong> – Typical FHIR CodeSystems do not contain any
concepts that are not native to that CodeSystem. In cases where they
do appear, this converter defaults to URIs
for references, unless this flag is present, in which case the converter
will attempt to construct CURIEs. (not implemented)</p></li>
<li><p><strong>predicate_period_replacement</strong> – Predicates URIs populated into <cite>CodeSystem.concept.property.packages</cite>
and <cite>CodeSystem.concept.property.packages</cite>, but the HAPI FHIR server
has a bug in which periods ‘.’ cause errors. If this flag is present,
periods will be replaced with underscores ‘_’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>FHIR CodeSystem object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="oaklib.converters.obo_graph_to_fhir_converter.OboGraphToFHIRConverter.code">
<span class="sig-name descname"><span class="pre">code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/oaklib/converters/obo_graph_to_fhir_converter.html#OboGraphToFHIRConverter.code"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#oaklib.converters.obo_graph_to_fhir_converter.OboGraphToFHIRConverter.code" title="Link to this definition"></a></dt>
<dd><p>Convert a packages.</p>
<p>This is a wrapper onto curie_converter.compress</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>uri</strong> – URI or CURIE to convert</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>CURIE</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="data-model-converter.html" class="btn btn-neutral float-left" title="Abstract Class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="obo-graph-to-obo-format.html" class="btn btn-neutral float-right" title="OBO Graph to OBO Format Converter" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2024, OAK developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>