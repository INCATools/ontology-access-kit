<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OAK taxon-constraints command &mdash; oaklib  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/nbsphinx-code-cells.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=046fa432"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="OAK termset-similarity command" href="TermsetSimilarity.html" />
    <link rel="prev" title="OAK statistics command" href="Statistics.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            oaklib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/index.html">The OAK Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/index.html">OAK Library Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datamodels/index.html">Datamodels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../howtos/index.html">How-To Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Commands</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Apply.html">OAK apply command</a></li>
<li class="toctree-l3"><a class="reference internal" href="Associations.html">OAK associations command</a></li>
<li class="toctree-l3"><a class="reference internal" href="DiffViaMappings.html">OAK diff-via-mappings command</a></li>
<li class="toctree-l3"><a class="reference internal" href="Disjoints.html">OAK disjoints command</a></li>
<li class="toctree-l3"><a class="reference internal" href="Enrichment.html">OAK enrichment command</a></li>
<li class="toctree-l3"><a class="reference internal" href="LogicalDefinitions.html">OAK logical-definitions command</a></li>
<li class="toctree-l3"><a class="reference internal" href="Mappings.html">OAK mappings command</a></li>
<li class="toctree-l3"><a class="reference internal" href="Obsoletes.html">OAK obsoletes command</a></li>
<li class="toctree-l3"><a class="reference internal" href="Paths.html">OAK paths command</a></li>
<li class="toctree-l3"><a class="reference internal" href="Relationships.html">OAK relationships command</a></li>
<li class="toctree-l3"><a class="reference internal" href="Rollup.html">OAK rollup command</a></li>
<li class="toctree-l3"><a class="reference internal" href="Statistics.html">OAK statistics command</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">OAK taxon-constraints command</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Background-Material">Background Material</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Help-Option">Help Option</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Set-up-an-alias">Set up an alias</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Taxon-Constraints-for-nucleus-membrane">Taxon Constraints for nucleus membrane</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Direct-Taxon-Constraints">Direct Taxon Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Taxon-Constraints-from-Other-Ontologies">Taxon Constraints from Other Ontologies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Evaluating-Candidate-taxon-constraints">Evaluating Candidate taxon constraints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="TermsetSimilarity.html">OAK termset-similarity command</a></li>
<li class="toctree-l3"><a class="reference internal" href="ValidateDefinitions.html">OAK validate-definitions command</a></li>
<li class="toctree-l3"><a class="reference internal" href="ValidateMappings.html">OAK validate-mappings command</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Ontologies/index.html">Ontologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Adapters/index.html">Adapter Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Interfaces/index.html">Interfaces Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">oaklib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Examples</a></li>
          <li class="breadcrumb-item"><a href="index.html">Commands</a></li>
      <li class="breadcrumb-item active">OAK taxon-constraints command</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/examples/Commands/TaxonConstraints.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="OAK-taxon-constraints-command">
<h1>OAK taxon-constraints command<a class="headerlink" href="#OAK-taxon-constraints-command" title="Link to this heading"></a></h1>
<p>This notebook is intended as a supplement to the <a class="reference external" href="https://incatools.github.io/ontology-access-kit/cli.html">main OAK CLI docs</a>.</p>
<p>This notebook provides examples for the <code class="docutils literal notranslate"><span class="pre">taxon-constraints</span></code> command, which can be used to lookup direct and inferred taxon constraints for terms</p>
<section id="Background-Material">
<h2>Background Material<a class="headerlink" href="#Background-Material" title="Link to this heading"></a></h2>
<p>We strongly recommend you first read the <a class="reference external" href="https://oboacademy.github.io/obook/explanation/taxon-constraints-explainer/">Taxon Constraints Explainer</a> on the OBook.</p>
</section>
<section id="Help-Option">
<h2>Help Option<a class="headerlink" href="#Help-Option" title="Link to this heading"></a></h2>
<p>You can get help on any OAK command using <code class="docutils literal notranslate"><span class="pre">--help</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>runoak<span class="w"> </span>taxon-constraints<span class="w"> </span>--help
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Usage: runoak taxon-constraints [OPTIONS] [TERMS]...

  Compute all taxon constraints for a term or terms.

  This will apply rules using the inferred ancestors of subject terms, as well
  as inferred ancestors/descendants of taxon terms.

  The input ontology MUST include both the taxon constraint relationships AND
  the relevant portion of NCBI Taxonomy

  Example:

      runoak -i db/go.db taxon-constraints GO:0034357 --include-redundant -p
      i,p

  Example:

      runoak -i sqlite:obo:uberon taxon-constraints UBERON:0003884
      UBERON:0003941 -p i,p

  This command is a wrapper onto taxon_constraints_utils:

  - https://incatools.github.io/ontology-access-
  kit/src/oaklib.utilities.taxon.taxon_constraints_utils

Options:
  -o, --output FILENAME           Output file, e.g. obo file
  -O, --output-type TEXT          Desired output type
  -p, --predicates TEXT           A comma-separated list of predicates
  -M, --graph-traversal-method [HOP|ENTAILMENT]
                                  Desired output type
  -A, --all / --no-A, --no-all    if specified then perform for all terms
                                  [default: no-A]
  --include-redundant / --no-include-redundant
                                  if specified then include redundant taxon
                                  constraints from ancestral subjects
                                  [default: no-include-redundant]
  --direct / --no-direct          only include directly asserted taxon
                                  constraints  [default: no-direct]
  --help                          Show this message and exit.
</pre></div></div>
</div>
</section>
<section id="Set-up-an-alias">
<h2>Set up an alias<a class="headerlink" href="#Set-up-an-alias" title="Link to this heading"></a></h2>
<p>For convenience we will set up an alias for use in this notebook</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alias</span> <span class="n">go</span> <span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">sqlite</span><span class="p">:</span><span class="n">obo</span><span class="p">:</span><span class="n">go</span>
</pre></div>
</div>
</div>
</section>
<section id="Taxon-Constraints-for-nucleus-membrane">
<h2>Taxon Constraints for nucleus membrane<a class="headerlink" href="#Taxon-Constraints-for-nucleus-membrane" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">go</span> <span class="n">taxon</span><span class="o">-</span><span class="n">constraints</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">include</span><span class="o">-</span><span class="n">redundant</span> <span class="s2">&quot;nuclear membrane&quot;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
id: GO:0031965
label: nuclear membrane
description: &#39;Term GO:0031965 &#34;nuclear membrane&#34; is ONLY found in NCBITaxon:2759 &#34;Eukaryota&#34;
  (NOT asserted: original term = GO:0005634 &#34;nucleus&#34;); no additional constraints&#39;
only_in:
- subject: GO:0005634
  predicate: RO:0002160
  asserted: false
  redundant: false
  taxon:
    id: NCBITaxon:2759
    label: Eukaryota
  via_terms:
  - id: GO:0005634
    label: nucleus
</pre></div></div>
</div>
<p>The YAML here conforms to the <a class="reference external" href="https://incatools.github.io/ontology-access-kit/datamodels/taxon-constraints/index.html">Taxon Constraints</a> data model defined in OAK.</p>
<p>Here we can see that “nuclear membrane” is only applicable for eukaryotes.</p>
<p>Note the <code class="docutils literal notranslate"><span class="pre">via_terms</span></code> - this means that the constraint was inferred via the <code class="docutils literal notranslate"><span class="pre">nucleus</span></code> term (the nucleus is a eukaryotic specific feature)</p>
</section>
<section id="Direct-Taxon-Constraints">
<h2>Direct Taxon Constraints<a class="headerlink" href="#Direct-Taxon-Constraints" title="Link to this heading"></a></h2>
<p>to show ONLY direct taxon constraints, use <code class="docutils literal notranslate"><span class="pre">--direct</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">go</span> <span class="n">taxon</span><span class="o">-</span><span class="n">constraints</span> <span class="o">--</span><span class="n">direct</span> <span class="n">GO</span><span class="p">:</span><span class="mi">0005634</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
id: GO:0005634
label: nucleus
description: Term GO:0005634 &#34;nucleus&#34; is ONLY found in NCBITaxon:2759 &#34;Eukaryota&#34;
  (IS asserted); no additional constraints
only_in:
- subject: GO:0005634
  predicate: RO:0002160
  asserted: true
  redundant: false
  taxon:
    id: NCBITaxon:2759
    label: Eukaryota
  via_terms:
  - id: GO:0005634
    label: nucleus
</pre></div></div>
</div>
</section>
<section id="Taxon-Constraints-from-Other-Ontologies">
<h2>Taxon Constraints from Other Ontologies<a class="headerlink" href="#Taxon-Constraints-from-Other-Ontologies" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">go</span> <span class="n">taxon</span><span class="o">-</span><span class="n">constraints</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">include</span><span class="o">-</span><span class="n">redundant</span> <span class="n">ossification</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
id: GO:0001503
label: ossification
description: &#39;Term GO:0001503 &#34;ossification&#34; is ONLY found in NCBITaxon:7742 &#34;Vertebrata
  &lt;vertebrates&gt;&#34; (NOT asserted: original term = UBERON:0001474 &#34;bone element&#34;); is
  NEVER found in NCBITaxon:4896 &#34;Schizosaccharomyces pombe&#34; OR NCBITaxon:4932 &#34;Saccharomyces
  cerevisiae&#34; OR NCBITaxon:2157 &#34;Archaea&#34; OR NCBITaxon:2 &#34;Bacteria&#34; IS asserted&#39;
only_in:
- subject: UBERON:0001474
  predicate: RO:0002160
  asserted: false
  redundant: false
  taxon:
    id: NCBITaxon:7742
    label: Vertebrata &lt;vertebrates&gt;
  via_terms:
  - id: UBERON:0001474
    label: bone element
never_in:
- subject: GO:0032501
  predicate: RO:0002161
  asserted: false
  redundant: false
  redundant_with_only_in: true
  taxon:
    id: NCBITaxon:4932
    label: Saccharomyces cerevisiae
  via_terms:
  - id: GO:0032501
    label: multicellular organismal process
- subject: GO:0032501
  predicate: RO:0002161
  asserted: false
  redundant: false
  redundant_with_only_in: true
  taxon:
    id: NCBITaxon:4896
    label: Schizosaccharomyces pombe
  via_terms:
  - id: GO:0032501
    label: multicellular organismal process
- subject: GO:0032501
  predicate: RO:0002161
  asserted: false
  redundant: false
  redundant_with_only_in: true
  taxon:
    id: NCBITaxon:2157
    label: Archaea
  via_terms:
  - id: GO:0032501
    label: multicellular organismal process
- subject: GO:0032501
  predicate: RO:0002161
  asserted: false
  redundant: false
  redundant_with_only_in: true
  taxon:
    id: NCBITaxon:2
    label: Bacteria
  via_terms:
  - id: GO:0032501
    label: multicellular organismal process
</pre></div></div>
</div>
<p>In this case we can see that the primary <code class="docutils literal notranslate"><span class="pre">only_in</span></code> constraint comes not from GO but from Uberon.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">paths</span></code> command to explore specific paths further:</p>
<p>go paths –directed –target NCBITaxon:7742 ossification</p>
</section>
<section id="Evaluating-Candidate-taxon-constraints">
<h2>Evaluating Candidate taxon constraints<a class="headerlink" href="#Evaluating-Candidate-taxon-constraints" title="Link to this heading"></a></h2>
<p>The related <code class="docutils literal notranslate"><span class="pre">apply-taxon-constraints</span></code> command can be used to test taxon constraints</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">go</span> <span class="n">apply</span><span class="o">-</span><span class="n">taxon</span><span class="o">-</span><span class="n">constraints</span> <span class="n">GO</span><span class="p">:</span><span class="mi">0031965</span> <span class="n">only</span> <span class="n">NCBITaxon</span><span class="p">:</span><span class="mi">2759</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
id: GO:0031965
label: nuclear membrane
only_in:
- subject: GO:0031965
  predicate: RO:0002160
  redundant: true
  taxon:
    id: NCBITaxon:2759
    label: Eukaryota
  redundant_with:
  - subject: GO:0005634
    predicate: RO:0002160
    asserted: false
    redundant: false
    taxon:
      id: NCBITaxon:2759
      label: Eukaryota
    via_terms:
    - id: GO:0005634
      label: nucleus
  comments:
  - Redundant with pre-existing constraint                                 GO:0005634
    // Taxon(id=&#39;NCBITaxon:2759&#39;, label=&#39;Eukaryota&#39;)
</pre></div></div>
</div>
<p>This tells us that the addition is valid, but redundant</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">go</span> <span class="n">apply</span><span class="o">-</span><span class="n">taxon</span><span class="o">-</span><span class="n">constraints</span> <span class="n">GO</span><span class="p">:</span><span class="mi">0031965</span> <span class="n">only</span> <span class="n">NCBITaxon</span><span class="p">:</span><span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
id: GO:0031965
label: nuclear membrane
description: &#39;Unsatisfiable taxon constraints: NCBITaxon:2759 and NCBITaxon:2 are
  disjoint&#39;
unsatisfiable: true
only_in:
- subject: GO:0031965
  predicate: RO:0002160
  taxon:
    id: NCBITaxon:2
  candidate: true
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Statistics.html" class="btn btn-neutral float-left" title="OAK statistics command" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="TermsetSimilarity.html" class="btn btn-neutral float-right" title="OAK termset-similarity command" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2024, OAK developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>