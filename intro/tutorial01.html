<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Part 1: Getting Started &mdash; oaklib  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=046fa432"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Part 2: Basic Python" href="tutorial02.html" />
    <link rel="prev" title="Tutorial" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            oaklib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorial</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Part 1: Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#install-from-pypi">Install from PyPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-the-oak-command">Run the OAK command</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#basics">Basics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#query-the-obo-library">Query the OBO Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="#search">Search</a></li>
<li class="toctree-l4"><a class="reference internal" href="#working-with-local-files">Working with local files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#introduction-to-graphs-and-trees">Introduction to graphs and trees</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fetching-ancestors">Fetching ancestors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#predicate-abbreviations">Predicate Abbreviations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ancestor-statistics">Ancestor Statistics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#oak-trees">Oak Trees</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-search">Advanced Search</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-search-terms-as-parameters">Using search terms as parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#chaining-commands">Chaining Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualization">Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-other-backends">Using other backends</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-ubergraph">Using Ubergraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-ontobee">Using Ontobee</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-bioportal-and-ontoportal">Using BioPortal and OntoPortal</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-ols">Using OLS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#next-steps">Next steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial02.html">Part 2: Basic Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial03.html">Part 3: Triplestore Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial04.html">Part 4: OboGraphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial05.html">Part 5: Graph Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial06.html">Part 6: Working With OWL</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial07.html">Part 7: SQLite files</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial08.html">Part 8: Applying Changes to Ontologies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">The OAK Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../packages/index.html">OAK Library Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datamodels/index.html">Datamodels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/index.html">How-To Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">oaklib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Tutorial</a></li>
      <li class="breadcrumb-item active">Part 1: Getting Started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/intro/tutorial01.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="part-1-getting-started">
<span id="tutorial01"></span><h1>Part 1: Getting Started<a class="headerlink" href="#part-1-getting-started" title="Link to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At the end of this part of the tutorial, you should have a basic understanding of how to perform different OAK operations on the command line.
No programming knowledge is necessary for this part, but some basic understanding of the command line and how to install Python is assumed.</p>
</div>
<p>First we will install the package and then we will try some command line examples
querying the Drosophila (fruit fly) anatomy ontology (<a class="reference external" href="http://obofoundry.org/ontology/fbbt">fbbt</a>).</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<section id="install-from-pypi">
<h3>Install from PyPI<a class="headerlink" href="#install-from-pypi" title="Link to this heading"></a></h3>
<p>First, create a directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~</span>
<span class="n">mkdir</span> <span class="n">oak</span><span class="o">-</span><span class="n">tutorial</span>
<span class="n">cd</span> <span class="n">oak</span><span class="o">-</span><span class="n">tutorial</span>
</pre></div>
</div>
<p>Then create a virtual environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>python3 -m venv venv
source venv/bin/activate
export PYTHONPATH=.:$PYTHONPATH
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you have Python 3.9 or higher</p>
</div>
<p>Then install:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">oaklib</span>
</pre></div>
</div>
</section>
<section id="run-the-oak-command">
<h3>Run the OAK command<a class="headerlink" href="#run-the-oak-command" title="Link to this heading"></a></h3>
<p>After successful installation, try invoking OAK via <code class="docutils literal notranslate"><span class="pre">runoak</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>You should see a list of all commands that are supported by OAK.</p>
<p>You can get help on a specific command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="n">search</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>See also the <a class="reference internal" href="../cli.html#command-line-interface"><span class="std std-ref">Command Line</span></a> section of this documentation</p>
</section>
</section>
<section id="basics">
<h2>Basics<a class="headerlink" href="#basics" title="Link to this heading"></a></h2>
<section id="query-the-obo-library">
<h3>Query the OBO Library<a class="headerlink" href="#query-the-obo-library" title="Link to this heading"></a></h3>
<p>Next try using the <a class="reference external" href="https://incatools.github.io/ontology-access-kit/cli.html#runoak-info">info command</a>
to search for a term in the <em>Drosophila</em> (fruit fly) anatomy ontology (<a class="reference external" href="http://obofoundry.org/ontology/fbbt">fbbt</a>).</p>
<p>The base command takes an <code class="docutils literal notranslate"><span class="pre">--input</span></code> (or just <code class="docutils literal notranslate"><span class="pre">-i</span></code>) option that specifies the input
<span class="xref std std-term">selector</span>. We will return to the <a class="reference external" href="https://incatools.github.io/ontology-access-kit/selectors.html">full syntax</a> later,
but one pattern that is useful to know is <code class="docutils literal notranslate"><span class="pre">sqlite:obo:&lt;ontology-id&gt;</span></code>, which uses the <a class="reference internal" href="../packages/implementations/sqldb.html#sql-implementation"><span class="std std-ref">SQL Database Adapter</span></a> to fetch
and use the SQLite version of an ontology.</p>
<p>To do a basic lookup, using either a name or ID:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">--</span><span class="nb">input</span> <span class="n">sqlite</span><span class="p">:</span><span class="n">obo</span><span class="p">:</span><span class="n">fbbt</span> <span class="n">info</span> <span class="s1">&#39;wing vein&#39;</span>
</pre></div>
</div>
<p>The first time you run this there will be a lag as the file is downloaded, but after that it will be cached. The results should be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>FBbt:00004751 ! wing vein
</pre></div>
</div>
<p>You get the same results by specifying the <a class="reference internal" href="../glossary.html#term-CURIE"><span class="xref std std-term">CURIE</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">--</span><span class="nb">input</span> <span class="n">sqlite</span><span class="p">:</span><span class="n">obo</span><span class="p">:</span><span class="n">fbbt</span> <span class="n">info</span> <span class="n">FBbt</span><span class="p">:</span><span class="mi">00004751</span>
</pre></div>
</div>
</section>
<section id="search">
<h3>Search<a class="headerlink" href="#search" title="Link to this heading"></a></h3>
<p>You can use the <a class="reference external" href="https://incatools.github.io/ontology-access-kit/cli.html#runoak-search">search command</a> to search for terms.
You can also use a special search syntax like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">sqlite</span><span class="p">:</span><span class="n">obo</span><span class="p">:</span><span class="n">fbbt</span> <span class="n">search</span> <span class="s1">&#39;t^wing vein&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We switched from <code class="docutils literal notranslate"><span class="pre">--input</span></code> to the shorter <code class="docutils literal notranslate"><span class="pre">-i</span></code> form. We will continue to use the abbreviation in this tutorial.
It is up to you which one you use. Some people prefer more verbose explicit options (and the extra typing!). Others
prefer the more compact form. For the whole command line interface we attempt to follow common standards to avoid
any surprises.</p>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">t</span></code> means “term” (search in all term fields) and <code class="docutils literal notranslate"><span class="pre">^</span></code> means “starts with” (don’t worry if this sounds a
bit abstract just now, this will be introduced in more detail later).</p>
<p>This will give results like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>FBbt:00004751 ! wing vein
FBbt:00004754 ! axillary vein
FBbt:00004759 ! wing vein L1
FBbt:00004760 ! wing vein L2
...
</pre></div>
</div>
<p>Note that “axillary vein” matches because this term has an <a class="reference internal" href="../glossary.html#term-Alias"><span class="xref std std-term">alias</span></a></p>
<p>If you want to instead find any terms that contain the string “wing vein”,
then you can use the <code class="docutils literal notranslate"><span class="pre">~</span></code> symbol:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">sqlite</span><span class="p">:</span><span class="n">obo</span><span class="p">:</span><span class="n">fbbt</span> <span class="n">search</span> <span class="s1">&#39;t~wing vein&#39;</span>
</pre></div>
</div>
<p>The results should include the previous results, and include broader matches such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>...
FBbt:00046009 ! presumptive wing vein L1
FBbt:00046030 ! presumptive wing vein L2
FBbt:00046031 ! presumptive wing vein L3
...
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">/</span></code> symbol to perform a <span class="xref std std-term">regular expression</span> search:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>runoak -i sqlite:obo:fbbt search &#39;t/^wing vein L\d+$&#39;

FBbt:00004754 ! axillary vein
FBbt:00004759 ! wing vein L1
FBbt:00004760 ! wing vein L2
FBbt:00004761 ! wing vein L3
FBbt:00004762 ! wing vein L4
FBbt:00004763 ! wing vein L5
FBbt:00004764 ! wing vein L6
</pre></div>
</div>
</section>
<section id="working-with-local-files">
<h3>Working with local files<a class="headerlink" href="#working-with-local-files" title="Link to this heading"></a></h3>
<p>To work with a local ontology file, you can provide the filename as input:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">purl</span><span class="o">.</span><span class="n">obolibrary</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">obo</span><span class="o">/</span><span class="n">fbbt</span><span class="o">.</span><span class="n">obo</span>
</pre></div>
</div>
<p>This will create a file <code class="docutils literal notranslate"><span class="pre">fbbt.obo</span></code> in your directory. This is an <a class="reference internal" href="../glossary.html#term-OBO-Format"><span class="xref std std-term">OBO Format</span></a> file that
can be passed in directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">--</span><span class="nb">input</span> <span class="n">fbbt</span><span class="o">.</span><span class="n">obo</span> <span class="n">search</span> <span class="s1">&#39;wing vein&#39;</span>
</pre></div>
</div>
<p>This should give the same results as when you used the sqlite adapter.</p>
</section>
</section>
<section id="introduction-to-graphs-and-trees">
<h2>Introduction to graphs and trees<a class="headerlink" href="#introduction-to-graphs-and-trees" title="Link to this heading"></a></h2>
<section id="fetching-ancestors">
<h3>Fetching ancestors<a class="headerlink" href="#fetching-ancestors" title="Link to this heading"></a></h3>
<p>Next we will try a different command, plugging in an ID (<a class="reference internal" href="../glossary.html#term-CURIE"><span class="xref std std-term">CURIE</span></a>) we got from the previous search.</p>
<p>We will use the <a class="reference external" href="https://incatools.github.io/ontology-access-kit/cli.html#runoak-ancestors">ancestors command</a> to find all subclass-of (<code class="docutils literal notranslate"><span class="pre">rdfs:subClassOf</span></code>) and part-of (<code class="docutils literal notranslate"><span class="pre">BFO:0000050</span></code>) <span class="xref std std-term">Ancestors</span> of ‘wing vein’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">--</span><span class="nb">input</span> <span class="n">sqlite</span><span class="p">:</span><span class="n">obo</span><span class="p">:</span><span class="n">fbbt</span> <span class="n">ancestors</span> <span class="n">FBbt</span><span class="p">:</span><span class="mi">00004751</span> <span class="o">--</span><span class="n">predicates</span> <span class="n">i</span><span class="p">,</span><span class="n">p</span>
</pre></div>
</div>
<p>You should see body parts such as cuticle, wing, etc, alongside their ID:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">FBbt</span><span class="p">:</span><span class="mi">00004729</span>   <span class="n">wing</span>
<span class="n">FBbt</span><span class="p">:</span><span class="mi">00007000</span>   <span class="n">appendage</span>
<span class="o">...</span>
</pre></div>
</div>
</section>
<section id="predicate-abbreviations">
<h3>Predicate Abbreviations<a class="headerlink" href="#predicate-abbreviations" title="Link to this heading"></a></h3>
<p>Here we are providing the <a class="reference internal" href="../glossary.html#term-Predicate"><span class="xref std std-term">Predicates</span></a> to traverse via the <code class="docutils literal notranslate"><span class="pre">-p/--predicates</span></code> argument.
The values <code class="docutils literal notranslate"><span class="pre">i</span></code> and <code class="docutils literal notranslate"><span class="pre">p</span></code> for the predicates argument are short-hand names for
<code class="docutils literal notranslate"><span class="pre">rdfs:subClassOf</span></code> and <code class="docutils literal notranslate"><span class="pre">BFO:0000050</span></code>, respectively.</p>
<p>You can get the same effect with the full predicate CURIEs, <code class="docutils literal notranslate"><span class="pre">rdfs:subClassOf</span></code> and <code class="docutils literal notranslate"><span class="pre">BFO:0000050</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">--</span><span class="nb">input</span> <span class="n">obolibrary</span><span class="p">:</span><span class="n">fbbt</span><span class="o">.</span><span class="n">obo</span> <span class="n">ancestors</span> <span class="n">FBbt</span><span class="p">:</span><span class="mi">00004751</span> <span class="o">--</span><span class="n">predicates</span> <span class="n">rdfs</span><span class="p">:</span><span class="n">subClassOf</span><span class="p">,</span><span class="n">BFO</span><span class="p">:</span><span class="mi">0000050</span>
</pre></div>
</div>
<p>Possible short-hand names are:
- <code class="docutils literal notranslate"><span class="pre">i</span></code> for the <code class="docutils literal notranslate"><span class="pre">rdfs:subClassOf</span></code> predicate
- <code class="docutils literal notranslate"><span class="pre">p</span></code> for the <code class="docutils literal notranslate"><span class="pre">BFO:0000050</span></code> predicate
- <code class="docutils literal notranslate"><span class="pre">e</span></code> for the <code class="docutils literal notranslate"><span class="pre">owl:equivalentClass</span></code> predicate</p>
</section>
<section id="ancestor-statistics">
<h3>Ancestor Statistics<a class="headerlink" href="#ancestor-statistics" title="Link to this heading"></a></h3>
<p>In the previous example we saw that <em>wing</em> and <em>appendage</em> are ancestor concepts of <em>wing vein</em> but we don’t
have any indication of distance. The <code class="docutils literal notranslate"><span class="pre">--statistics</span></code> option can provide this in a table form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">--</span><span class="nb">input</span> <span class="n">sqlite</span><span class="p">:</span><span class="n">obo</span><span class="p">:</span><span class="n">fbbt</span> <span class="n">ancestors</span> <span class="n">FBbt</span><span class="p">:</span><span class="mi">00004751</span> <span class="o">--</span><span class="n">predicates</span> <span class="n">i</span><span class="p">,</span><span class="n">p</span> <span class="o">--</span><span class="n">statistics</span>
</pre></div>
</div>
<p>This generates a TSV table that shows all ancestors plus (a) the number of input terms that count this as an ancestor
[only meaningful if multiple inputs provided] (b) minimum distance up from input term to ancestor</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">Ancestor statistics</span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>label</p></th>
<th class="head"><p>visits</p></th>
<th class="head"><p>distance</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FBbt:00004751</p></td>
<td><p>wing vein</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>FBbt:00007245</p></td>
<td><p>cuticular specialization</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>FBbt:00006015</p></td>
<td><p>wing blade</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>FBbt:00007010</p></td>
<td><p>multi-tissue structure</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>FBbt:00004729</p></td>
<td><p>wing</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>FBbt:00007000</p></td>
<td><p>appendage</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-even"><td><p>FBbt:00004551</p></td>
<td><p>adult external thorax</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
</section>
<section id="oak-trees">
<h3>Oak Trees<a class="headerlink" href="#oak-trees" title="Link to this heading"></a></h3>
<p>The <a class="reference internal" href="../cli.html#runoak-tree"><span class="std std-ref">tree</span></a> command will generate an ascii tree for a term</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">sqlite</span><span class="p">:</span><span class="n">obo</span><span class="p">:</span><span class="n">fbbt</span> <span class="n">tree</span> <span class="n">FBbt</span><span class="p">:</span><span class="mi">00004751</span> <span class="o">-</span><span class="n">p</span> <span class="n">i</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>* [] FBbt:10000000 ! anatomical entity
    * [i] FBbt:00007016 ! material anatomical entity
        * [i] FBbt:00007001 ! anatomical structure
            * [i] FBbt:00007013 ! acellular anatomical structure
                * [i] FBbt:00007245 ! cuticular specialization
                    * [i] **FBbt:00004751 ! wing vein**
</pre></div>
</div>
<p>For this example, we show only the is-a tree. You can try other predicates, or even leaving the predicate option unbounded.
This will generate large tree displays, due to the facts there are multiple <span class="xref std std-term">paths to root</span>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>you may be tempted to pass in only the <code class="docutils literal notranslate"><span class="pre">p</span></code> predicate to see <em>just</em> the partonomy. However, this will likely generate
a truncated tree, since many parts of are not <span class="xref std std-term">directly asserted</span>, they must be <span class="xref std std-term">inferred</span> from an is-a parent.
Later on we will see how to better incorporate reasoning, but for now it is recommended that you always include is-a
as a predicate</p>
</div>
</section>
</section>
<section id="advanced-search">
<h2>Advanced Search<a class="headerlink" href="#advanced-search" title="Link to this heading"></a></h2>
<section id="using-search-terms-as-parameters">
<h3>Using search terms as parameters<a class="headerlink" href="#using-search-terms-as-parameters" title="Link to this heading"></a></h3>
<p>Search terms can be used as input for <em>any</em> OAK command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">sqlite</span><span class="p">:</span><span class="n">obo</span><span class="p">:</span><span class="n">fbbt</span> <span class="n">tree</span> <span class="s2">&quot;t/^wing vein L.*$&quot;</span> <span class="o">-</span><span class="n">p</span> <span class="n">i</span>
</pre></div>
</div>
<p>This will feed the search results into the tree command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>* [] FBbt:10000000 ! anatomical entity
    * [i] FBbt:00007016 ! material anatomical entity
        * [i] FBbt:00007001 ! anatomical structure
            * [i] FBbt:00007013 ! acellular anatomical structure
                * [i] FBbt:00007245 ! cuticular specialization
                    * [i] FBbt:00004751 ! wing vein
                        * [i] FBbt:00047212 ! longitudinal vein
                            * [i] **FBbt:00004754 ! axillary vein**
                            * [i] **FBbt:00004759 ! wing vein L1**
                            * [i] **FBbt:00004760 ! wing vein L2**
                            * [i] **FBbt:00004761 ! wing vein L3**
                            * [i] **FBbt:00004762 ! wing vein L4**
                            * [i] **FBbt:00004763 ! wing vein L5**
                            * [i] **FBbt:00004764 ! wing vein L6**
</pre></div>
</div>
<p>Note that the direct matches are highlighted with <code class="docutils literal notranslate"><span class="pre">**...**</span></code></p>
</section>
</section>
<section id="chaining-commands">
<h2>Chaining Commands<a class="headerlink" href="#chaining-commands" title="Link to this heading"></a></h2>
<p>The output of one command can be passed in as input to another. Just specify <code class="docutils literal notranslate"><span class="pre">-</span></code> as one of the <span class="xref std std-term">arguments</span>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">sqlite</span><span class="p">:</span><span class="n">obo</span><span class="p">:</span><span class="n">fbbt</span> <span class="n">search</span> <span class="s2">&quot;t/^wing vein L.*$&quot;</span> <span class="o">|</span> <span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">sqlite</span><span class="p">:</span><span class="n">obo</span><span class="p">:</span><span class="n">fbbt</span> <span class="n">tree</span> <span class="o">-</span><span class="n">p</span> <span class="n">i</span> <span class="o">-</span>
</pre></div>
</div>
<p>This will give the same results as the above</p>
</section>
<section id="visualization">
<h2>Visualization<a class="headerlink" href="#visualization" title="Link to this heading"></a></h2>
<p>Later on we will see how we can  use the <a class="reference internal" href="../cli.html#runoak-viz"><span class="std std-ref">viz</span></a> command to make images like:</p>
<img alt="../_images/wing-vein.png" src="../_images/wing-vein.png" />
</section>
<section id="using-other-backends">
<h2>Using other backends<a class="headerlink" href="#using-other-backends" title="Link to this heading"></a></h2>
<p>So far we have used <a class="reference internal" href="../packages/implementations/sqldb.html#sql-implementation"><span class="std std-ref">SQL Database Adapter</span></a>.</p>
<p>In fact, OAK allows a number of other backends (also called <a class="reference internal" href="../glossary.html#term-Implementation"><span class="xref std std-term">Implementations</span></a>). We will give a brief overview of some here</p>
<section id="using-ubergraph">
<h3>Using Ubergraph<a class="headerlink" href="#using-ubergraph" title="Link to this heading"></a></h3>
<p><a class="reference internal" href="../glossary.html#term-Ubergraph"><span class="xref std std-term">Ubergraph</span></a> is an integrated ontology store that contains a merged set of mutually referential OBO ontologies.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">ubergraph</span><span class="p">:</span> <span class="n">search</span> <span class="s1">&#39;wing vein&#39;</span>
</pre></div>
</div>
<p>This searches the <a class="reference internal" href="tutorial03.html#ubergraph"><span class="std std-ref">Ubergraph</span></a> backend using the blazegraph search interface.</p>
<p>Note that in addition to searching over a wider range
of ontologies, this returns a ranked list that might include matches only to “wing” or “vein”. Currently each backend implements
search a little differently, but this will be more unified and controllable in the future.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>in future this behavior may change, and relevancy-ranked searching will be more explicitly under
control of the user.</p>
</div>
<p>You can constrain search to a particular ontology in Ubergraph:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">ubergraph</span><span class="p">:</span><span class="n">fbbt</span> <span class="n">search</span> <span class="s1">&#39;wing vein&#39;</span>
</pre></div>
</div>
<p>The ubergraph implementation largely allows for the same operations as the SQL one we have seen previously.
However, not every implementation implements every operation. And some operations may be more efficient on some implementations.
There are a variety of space-time tradeoffs as well. See the <a class="reference internal" href="../packages/architecture.html#architecture"><span class="std std-ref">Architecture</span></a> document to learn more.</p>
<p>The main obvious difference is that there is no need for any ontology download - so you can do quick queries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">ubergraph</span><span class="p">:</span><span class="n">chebi</span> <span class="n">info</span> <span class="n">CHEBI</span><span class="p">:</span><span class="mi">15356</span> <span class="o">-</span><span class="n">O</span> <span class="n">obo</span>
</pre></div>
</div>
<p>generates obo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Term]
id: CHEBI:15356
name: cysteine
def: &quot;A sulfur-containing amino acid that is propanoic acid with an amino group at position 2 and a sulfanyl group at position 3.&quot; []
xref: Beilstein:1721406
xref: CAS:3374-22-9
...
is_a: CHEBI:33704 ! alpha-amino acid
is_a: CHEBI:26167 ! polar amino acid
is_a: CHEBI:26834 ! sulfur-containing amino acid
</pre></div>
</div>
</section>
<section id="using-ontobee">
<h3>Using Ontobee<a class="headerlink" href="#using-ontobee" title="Link to this heading"></a></h3>
<p>Another triplestore you can use is ontobee</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">ontobee</span><span class="p">:</span><span class="n">chebi</span> <span class="n">info</span> <span class="n">CHEBI</span><span class="p">:</span><span class="mi">15356</span> <span class="o">-</span><span class="n">O</span> <span class="n">obo</span>
</pre></div>
</div>
<p>Currently the ontobee implementation does not handle non-isa hierarchical queries.</p>
</section>
<section id="using-bioportal-and-ontoportal">
<h3>Using BioPortal and OntoPortal<a class="headerlink" href="#using-bioportal-and-ontoportal" title="Link to this heading"></a></h3>
<p><a class="reference internal" href="../glossary.html#term-Bioportal"><span class="xref std std-term">BioPortal</span></a> is a comprehensive repository of biomedical ontologies. It is part of the OntoPortal Alliance, which provides access to multiple ontologies outside the life sciences.</p>
<p>To query BioPortal (or any OntoPortal endpoint), first you will need to go to <a class="reference external" href="https://bioportal.bioontology.org/">BioPortal</a> and get an <span class="xref std std-term">API key</span> (if you don’t already have one).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The API Key is assigned to each user upon creating an account on BioPortal.</p>
</div>
<p>You will then need to set it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="nb">set</span><span class="o">-</span><span class="n">apikey</span> <span class="o">--</span><span class="n">endpoint</span> <span class="n">bioportal</span> <span class="n">YOUR</span><span class="o">-</span><span class="n">API</span><span class="o">-</span><span class="n">KEY</span>
</pre></div>
</div>
<p>This stores it in an OS-dependent folder, which is then accessed by OAK for performing API queries. You don’t need to do this again,
unless you switch to a different computer.</p>
<p>After you have set the API key</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">bioportal</span><span class="p">:</span> <span class="n">search</span> <span class="s1">&#39;wing vein&#39;</span>
</pre></div>
</div>
<p>Again the results are relevance ranked, and there are a lot of them, as this includes multiple ontologies, you may want to ctrl-C to kill before the end.</p>
<p>Currently the bioportal implementation is not as fully featured as some of the others, and doesn’t take full advantage of all API routes</p>
<p>One of the unique features of bioportal is the comprehensiveness of computed lexical mappings. These can be exported in various <a class="reference internal" href="../glossary.html#term-SSSOM"><span class="xref std std-term">SSSOM</span></a> formats such
as yaml or TSV:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">bioportal</span><span class="p">:</span><span class="n">chebi</span> <span class="n">term</span><span class="o">-</span><span class="n">mappings</span> <span class="n">CHEBI</span><span class="p">:</span><span class="mi">15356</span> <span class="o">-</span><span class="n">O</span> <span class="n">sssom</span>
</pre></div>
</div>
<p>The Bioportal endpoint can also be used to <span class="xref std std-term">Annotate</span> sections of text, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">bioportal</span><span class="p">:</span><span class="n">cl</span> <span class="n">annotate</span> <span class="s2">&quot;interneuron of forebrain&quot;</span>
</pre></div>
</div>
<p>Gives results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">object_id</span><span class="p">:</span> <span class="n">CL</span><span class="p">:</span><span class="mi">0000099</span>
<span class="n">object_label</span><span class="p">:</span> <span class="n">interneuron</span>
<span class="n">object_source</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">data</span><span class="o">.</span><span class="n">bioontology</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">ontologies</span><span class="o">/</span><span class="n">CL</span>
<span class="n">match_type</span><span class="p">:</span> <span class="n">PREF</span>
<span class="n">subject_start</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">subject_end</span><span class="p">:</span> <span class="mi">11</span>
<span class="n">subject_label</span><span class="p">:</span> <span class="n">INTERNEURON</span>

<span class="o">---</span>
<span class="n">object_id</span><span class="p">:</span> <span class="n">UBERON</span><span class="p">:</span><span class="mi">0001890</span>
<span class="n">object_label</span><span class="p">:</span> <span class="n">forebrain</span>
<span class="n">object_source</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">data</span><span class="o">.</span><span class="n">bioontology</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">ontologies</span><span class="o">/</span><span class="n">CL</span>
<span class="n">match_type</span><span class="p">:</span> <span class="n">PREF</span>
<span class="n">subject_start</span><span class="p">:</span> <span class="mi">16</span>
<span class="n">subject_end</span><span class="p">:</span> <span class="mi">24</span>
<span class="n">subject_label</span><span class="p">:</span> <span class="n">FOREBRAIN</span>
</pre></div>
</div>
<p>Note that the results here are in <span class="xref std std-term">YAML</span> syntax, with each result being a YAML document.
The results of the annotate command conform to the annotate <a class="reference internal" href="../glossary.html#term-Datamodel"><span class="xref std std-term">Datamodel</span></a>. We will return to
the concept of datamodels later on, for now you can look at the <a class="reference external" href="https://incatools.github.io/ontology-access-kit/datamodels/text-annotator/index.html">Text Annotator Datamodel docs</a>.</p>
<p>Some datamodels can also be expressed as TSVs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">bioportal</span><span class="p">:</span><span class="n">cl</span> <span class="n">annotate</span> <span class="s2">&quot;interneuron of forebrain&quot;</span> <span class="o">-</span><span class="n">O</span> <span class="n">csv</span>
</pre></div>
</div>
<p>Gives back a TSV table:</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">Annotate results</span><a class="headerlink" href="#id3" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>predicate_id</p></th>
<th class="head"><p>object_id</p></th>
<th class="head"><p>object_label</p></th>
<th class="head"><p>object_source</p></th>
<th class="head"><p>confidence</p></th>
<th class="head"><p>match_string</p></th>
<th class="head"><p>is_longest_match</p></th>
<th class="head"><p>matches_whole_text</p></th>
<th class="head"><p>match_type</p></th>
<th class="head"><p>info</p></th>
<th class="head"><p>subject_start</p></th>
<th class="head"><p>subject_end</p></th>
<th class="head"><p>subject_label</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CL:0000099</p></td>
<td><p>interneuron</p></td>
<td><p><a class="reference external" href="https://data.bioontology.org/ontologies/CL">https://data.bioontology.org/ontologies/CL</a></p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>PREF</p></td>
<td><p>None</p></td>
<td><p>1</p></td>
<td><p>11</p></td>
<td><p>INTERNEURON</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>UBERON:0001890</p></td>
<td><p>forebrain</p></td>
<td><p><a class="reference external" href="https://data.bioontology.org/ontologies/CL">https://data.bioontology.org/ontologies/CL</a></p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>PREF</p></td>
<td><p>None</p></td>
<td><p>16</p></td>
<td><p>24</p></td>
<td><p>FOREBRAIN</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>Any other implementation that implements the annotate interface will <em>conform</em> to this same datamodel and format.</p>
</section>
<section id="using-ols">
<h3>Using OLS<a class="headerlink" href="#using-ols" title="Link to this heading"></a></h3>
<p><a class="reference internal" href="../glossary.html#term-OLS"><span class="xref std std-term">OLS</span></a> is a repository of high quality ontologies. It has less breadth than BioPortal. Currently OAK offers very limited functionality with OLS
but this will be improved in future.</p>
<p>OLS also aggregates curated mappings, these can be exported in the same way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runoak</span> <span class="o">-</span><span class="n">i</span> <span class="n">ols</span><span class="p">:</span> <span class="n">term</span><span class="o">-</span><span class="n">mappings</span> <span class="n">CHEBI</span><span class="p">:</span><span class="mi">15356</span> <span class="o">-</span><span class="n">O</span> <span class="n">sssom</span>
</pre></div>
</div>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text">OLS SSSOM</span><a class="headerlink" href="#id4" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>subject_id</p></th>
<th class="head"><p>subject_label</p></th>
<th class="head"><p>predicate_id</p></th>
<th class="head"><p>object_id</p></th>
<th class="head"><p>match_type</p></th>
<th class="head"><p>subject_source</p></th>
<th class="head"><p>object_source</p></th>
<th class="head"><p>mapping_provider</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CHEBI:15356</p></td>
<td><p>cysteine</p></td>
<td><p>skos:closeMatch</p></td>
<td><p>PMID:25181601</p></td>
<td><p>Unspecified</p></td>
<td><p>CHEBI</p></td>
<td><p>PMID</p></td>
<td><p>CDNO</p></td>
</tr>
<tr class="row-odd"><td><p>CHEBI:15356</p></td>
<td><p>cysteine</p></td>
<td><p>skos:closeMatch</p></td>
<td><p>PMID:25181601</p></td>
<td><p>Unspecified</p></td>
<td><p>CHEBI</p></td>
<td><p>PMID</p></td>
<td><p>CHEBI</p></td>
</tr>
<tr class="row-even"><td><p>CHEBI:15356</p></td>
<td><p>cysteine</p></td>
<td><p>skos:closeMatch</p></td>
<td><p>CAS:3374-22-9</p></td>
<td><p>Unspecified</p></td>
<td><p>CHEBI</p></td>
<td><p>CAS</p></td>
<td><p>CHEBI</p></td>
</tr>
<tr class="row-odd"><td><p>CHEBI:15356</p></td>
<td><p>cysteine</p></td>
<td><p>skos:closeMatch</p></td>
<td><p>PMID:17439666</p></td>
<td><p>Unspecified</p></td>
<td><p>CHEBI</p></td>
<td><p>PMID</p></td>
<td><p>CHEBI</p></td>
</tr>
<tr class="row-even"><td><p>CHEBI:15356</p></td>
<td><p>cysteine</p></td>
<td><p>skos:closeMatch</p></td>
<td><p>KEGG:C00736</p></td>
<td><p>Unspecified</p></td>
<td><p>CHEBI</p></td>
<td><p>KEGG</p></td>
<td><p>CHEBI</p></td>
</tr>
<tr class="row-odd"><td><p>CHEBI:15356</p></td>
<td><p>cysteine</p></td>
<td><p>skos:closeMatch</p></td>
<td><p>KNApSAcK:C00007323</p></td>
<td><p>Unspecified</p></td>
<td><p>CHEBI</p></td>
<td><p>KNApSAcK</p></td>
<td><p>ZP</p></td>
</tr>
<tr class="row-even"><td><p>CHEBI:15356</p></td>
<td><p>cysteine</p></td>
<td><p>skos:closeMatch</p></td>
<td><p>Wikipedia:Cysteine</p></td>
<td><p>Unspecified</p></td>
<td><p>CHEBI</p></td>
<td><p>Wikipedia</p></td>
<td><p>ZP</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="next-steps">
<h2>Next steps<a class="headerlink" href="#next-steps" title="Link to this heading"></a></h2>
<p>You can play around with some of the other commands (see <a class="reference internal" href="../howtos/fhir-conversions.html#cli"><span class="std std-ref">CLI</span></a>), or go right into the next section on programmatic usage!</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorial02.html" class="btn btn-neutral float-right" title="Part 2: Basic Python" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2026, OAK developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>